@model IEnumerable<ITAssessmentSystem.Models.RUBRICS_DATA>

<form id="xxx" method="post">
    <div class="form-horizontal">
        @Html.ValidationSummary(true)

        <div class="form-group">
            @Html.Label("Course", new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.TextBox("Course")
            </div>
        </div>

        <div class="form-group">
            @Html.Label("Department", new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.TextBox("Department", Request.QueryString["Dept"].ToString(), new { @readonly = "readonly" })
            </div>
        </div>

        <div class="form-group">
            @Html.Label("Semester", new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.TextBox("Semester")
            </div>
        </div>
        <div class="form-group">
            @Html.Label("Instructor Email ID", new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.TextBox("Instructor_Email")
            </div>
        </div>
        <div class="form-group">
            @Html.Label("Outcome", new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.TextBox("Outcome", Request.QueryString["Outcome"].ToString(), new { @readonly = "readonly" })
            </div>
        </div>


        <table class="table table-bordered table-hover">
            <thead>
                <tr>
                    <th>
                        Topic
                    </th>
                    <th>
                        Poor
                    </th>
                    <th>
                        Developing
                    </th>
                    <th>
                        Developed
                    </th>
                    <th>
                        Exemplary
                    </th>
                </tr>
            </thead>
            <div id="reset">
                @foreach (var item in Model
                as List<ITAssessmentSystem.Models.RUBRICS_DATA>)
                {

                    <tr>
                        <td>
                            @item.TOPIC
                        </td>
                        <td>
                            <input type="radio" name="@item.RUBRIC_ROWID" value="0" class="rubs" />
                        </td>
                        <td>
                            <input type="radio" name="@item.RUBRIC_ROWID" value="1" class="rubs" />
                        </td>
                        <td>
                            <input type="radio" name="@item.RUBRIC_ROWID" value="2" class="rubs" />
                        </td>
                        <td>
                            <input type="radio" name="@item.RUBRIC_ROWID" value="3" class="rubs" />
                        </td>


                    </tr>
                }
            </div>
        </table>
        <br />
        <div class="form-group">
            <div class="col-md-2">
                <input type="button" value="Insert" class="btn btn-default" onclick="submitRecord(this);" />
            </div>
            <div class="col-md-2">
                <input type="button" value="Reset" class="btn btn-default" onclick="ResetRecord();" />
            </div>
            <div class="col-md-2">
                <input type="submit" value="Submit" class="btn btn-default" />
            </div>
        </div>

    </div>
</form>

<div id="currentRecord">
    @Html.Partial("_InstructorInput")
</div>

@Scripts.Render("~/bundles/jquery")
<script>
    function submitRecord(btnClicked) {
        var $form = $(btnClicked).parents('form');
        var tbl = $('#currentRecord');
        $.ajax({
            type: "POST",
            url: '/Assessment/Submit/',
            data: $form.serialize(),
            error: function (xhr, status, error) {
                //do something about the error
            },
            success: function (response) {
                //resets the previous selection for entering the next input
                // $('input[class="rubs"]').attr('checked', false);
                tbl.empty().append(response);
            }
        });
    }

    function ResetRecord() {

        var reply = confirm("Are you sure?");
        if (reply) {
            var tbl = $('#currentRecord');
            $.ajax({
                type: "GET",
                url: '/Assessment/Reset/',
                error: function (xhr, status, error) {
                    //do something about the error
                },
                success: function (response) {
                    //do something with response
                    tbl.empty().append(response);
                }
            });
        }
    }

</script>